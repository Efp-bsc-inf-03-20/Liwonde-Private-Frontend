(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5801],{7046:function(e,n,t){Promise.resolve().then(t.bind(t,4712))},4712:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return c}});var r=t(3827),a=t(5313),i=t(4090);t(5735);var s=t(5028),o=t(703);function l(e){let{redirectToAdmin:n,redirectToDepartment:t}=e,[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[d,f]=(0,i.useState)(!1),[g,h]=(0,i.useState)(""),m=async e=>{e.preventDefault(),f(!0),h("");try{console.log("submitting form");let e=await fetch("https://lph-backend.onrender.com/Staff/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:c})});if(e.ok){console.log("Login successiful");let r=(await e.json()).user;console.log("User data:",r),r.roles.includes("admin")?n():r.roles.includes("admin")&&r.assignedDepartment?t(r.assignedDepartment):(console.error("invalid credentials or insuffient role information"),h("invalid credentials or insuffient role information"))}}catch(e){console.error("Error during login",e),h("Login failed. please try again")}finally{f(!1)}};return(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"form",children:(0,r.jsx)("div",{className:"form-wrapper",children:(0,r.jsxs)("div",{className:"header1",children:[(0,r.jsx)("div",{className:"logo-container",children:(0,r.jsx)(o.default,{className:"center",src:s.default,alt:"talking",width:100,height:100,style:{borderRadius:"10px"}})}),(0,r.jsx)("h1",{children:"Staff Login"}),(0,r.jsxs)("form",{onSubmit:m,children:[(0,r.jsx)("label",{className:"name",children:"Username"}),(0,r.jsx)("input",{type:"text",id:"name",placeholder:"your username",value:a,onChange:e=>l(e.target.value)}),(0,r.jsx)("label",{className:"name",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"name",value:c,placeholder:"*******",onChange:e=>u(e.target.value)}),(0,r.jsx)("a",{href:"Dashboard",children:(0,r.jsx)("button",{className:"button1",type:"submit",onClick:()=>{console.log("Button Clicked!",g)},children:d?"Logging in ... ":"Login"})})]})]})})})})}function c(){let e=(0,a.useRouter)();return(0,r.jsx)("div",{children:(0,r.jsx)(l,{onLoginSucess:()=>{console.log("Login Successfully"),alert("login successfully")},redirectToAdmin:()=>{e.push("/Finance/Dashboard")},redirectToDepartment:n=>{e.push("/department/".concat(n))}})})}},703:function(e,n,t){"use strict";t.d(n,{default:function(){return a.a}});var r=t(7447),a=t.n(r)},7447:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e,n){for(var t in n)Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}(n,{getImageProps:function(){return o},default:function(){return l}});let r=t(6921),a=t(8630),i=t(1749),s=r._(t(536)),o=e=>{let{props:n}=(0,a.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(n))void 0===t&&delete n[e];return{props:n}},l=i.Image},5735:function(){},5028:function(e,n,t){"use strict";t.r(n),n.default={src:"/_next/static/media/icon.93b5ad26.png",height:4969,width:4914,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA7klEQVR42mN4+JCTmQEI/v9nUHr92qTl1SuzFiBbhQEI7t/XBsoBwZcvDD7nztU/37Jl3cwNG9bOP3++/sXPnwz+DFCdPBcuVDwMC/9mzQAGfuwODg+dLl0uvQ2UEwQpCDp3bvZ2BiA4eDBVaNq0WksGIDh+fMryb98YIkEK7G/fnnyageE/55UrDMIrVxbbMQDBgwc9e4Fyrgwg8PlzzIGdO7cuAyoSAkpp7N27aeaXL5H7GWAAqFL048eIXXfu9Fy9f7/rDJC9BygmwQAChw4xsDIwVIszMDAIPHzIYPf4MQPICiEGhnrhY8cUWAEv7m7IBsdJZAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[1749,2971,8069,1744],function(){return e(e.s=7046)}),_N_E=e.O()}]);